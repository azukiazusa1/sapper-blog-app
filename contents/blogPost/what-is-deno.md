---
id: 4mp2mdjvbhK1WWbSwwDffE
title: "Denoã¨ã¯ãªã«ã‹ - å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹"
slug: "what-is-deno"
about: "Denoã¯ã€Node.jsã®è£½ä½œè€…ã§ã‚ã‚‹Ryan Dahlã«ã‚ˆã£ã¦ä½œã‚‰ã‚ŒãŸã€æ–°ã—ã„JS/TSãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã™ã€‚ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ã€Node.jsã®ã‚¤ã‚±ã¦ãªã‹ã£ãŸã¨ã“ã‚ã‚’æ”¹è‰¯ã—ãŸã‚‚ã®ãŒDenoã«ãªã‚Šã¾ã™ã€‚"
createdAt: "2020-05-17T00:00+09:00"
updatedAt: "2020-05-17T00:00+09:00"
tags: ["", "", "Node.js"]
thumbnail:
  url: "https://images.ctfassets.net/in6v9lxmm5c8/6fPJ5Ah5oHsWbvScuggrCh/899629af347facfc74e95006dae6b617/deno.png"
  title: "Deno"
audio: null
selfAssessment: null
published: true
---
# ã¯ã˜ã‚ã«
`Deno` ã¨ã„ã†ã‚‚ã®ãŒé¢ç™½ãã†ã ã£ãŸã®ã§ã€ã“ã‚Œã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚

# Denoã¨ã¯ãªã«ã‹
![deno.png](https://firebasestorage.googleapis.com/v0/b/app-blog-1ef41.appspot.com/o/articles%2FF2z5J7aePghFMh2hqfVK%2Fc5f6e76283924635826976de979b2243.png?alt=media&token=9dd400da-b863-4435-b486-58bc8fc259e3)

â†‘ã‹ã‚ã„ã„ã€‚

[Deno(ãƒ‡ã‚£ãƒ¼ãƒ)](https://deno.land/)ã¨ã„ã†åå‰ã«ã¤ã„ã¦ã€èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚ç§ã‚‚æœ€è¿‘ã¾ã§çŸ¥ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€å®Ÿã¯ v1.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ãŒ 2020/5/13 ã¨ã”ãæœ€è¿‘ã®ã“ã¨ã§ã™ã€‚é–‹ç™ºè‡ªä½“ã¯ 2 å¹´å‰ã‹ã‚‰è¡Œã‚ã‚Œã¦ãŠã‚Šã¾ã—ãŸãŒã€çµæ§‹æ–°ã—ã‚ã®æŠ€è¡“ã§ã™ã€‚
ãã®è¨¼æ‹ ï¼ˆ?ï¼‰ã«[Denoã§ã‚°ã‚°ã‚‹](https://www.google.com/search?q=deno&sxsrf=ALeKk0123LZ8I95_5DE5Mjms6B7ZSrcAPw:1589727721603&source=lnms&tbm=isch&sa=X&ved=2ahUKEwiBw4qhlbvpAhWO-mEKHchCDxYQ_AUoBHoECBUQBg&biw=1440&bih=717)ã¨æ‹…ã€…éººã°ã£ã‹ã‚Šã§ã¦ãã¾ã™ã€‚ï¼ˆ2019/5/18 ç¾åœ¨ï¼‰

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 20200518 0.02.53.png](https://firebasestorage.googleapis.com/v0/b/app-blog-1ef41.appspot.com/o/articles%2FF2z5J7aePghFMh2hqfVK%2F0d8f32bffa9a2ca42846152a503a9f6d.png?alt=media&token=6a3ce549-6d1c-4a39-9bf5-5edce64982b1)

## çµå±€Denoã£ã¦ãªã‚“ãªã®ï¼Ÿ
`Deno` ã¯ã€`Node.js` ã®è£½ä½œè€…ã§ã‚ã‚‹ Ryan Dahl ã«ã‚ˆã£ã¦ä½œã‚‰ã‚ŒãŸã€æ–°ã—ã„ JS/TS ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã™ã€‚ã™ã£ã”ã„é›‘ã«èª¬æ˜ã™ã‚‹ã¨ã€`Node.js` ã®ã‚¤ã‚±ã¦ãªã‹ã£ãŸã¨ã“ã‚ã‚’æ”¹è‰¯ã—ãŸã‚‚ã®ãŒ `Deno` ã«ãªã‚Šã¾ã™ã€‚`Deno` ã£ã¦æ–‡å­—ã‚’ä¸¦ã¹æ›¿ãˆã‚‹ã¨ `Node` ã«ãªã‚Šã¾ã™ã­ã€‚

```js
const deno = 'node'.split('').sort().join('')
```

## DenoãŒã¤ãã‚‰ã‚ŒãŸèƒŒæ™¯
`Deno` ã¯ JSConf EU 2018 ã§ã® Ryan Dahl ã«ã‚ˆã‚‹è¬›æ¼”ã€ŒNode.js ã«é–¢ã™ã‚‹ 10 ã®åçœç‚¹ã€ã«ãŠã„ã¦ç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚

[10 Things I Regret About Node.js - Ryan Dahl - JSConf EU](https://www.youtube.com/watch?v=M3BM9TB-8yA&t=1319s)
[Node.js ã«ãŠã‘ã‚‹è¨­è¨ˆãƒŸã‚¹ By Ryan Dahl](https://yosuke-furukawa.hatenablog.com/entry/2018/06/07/080335)

Ryan Dahl ã¯è¬›æ¼”ã®ä¸­ã§ã€è‡ªèº«ãŒé–‹ç™ºã—ãŸ `Node.js` ã«ãŠã‘ã‚‹ 10 å€‹ã®å¾Œæ‚”ã—ã¦ã„ã‚‹ç‚¹ã«ã¤ã„ã¦è¨€åŠã—ã¾ã—ãŸã€‚ãã‚Œã‚‰ã®è¨­è¨ˆãƒŸã‚¹ã«åŸºã¥ã„ã¦é–‹ç™ºã•ã‚ŒãŸã®ãŒã€`Deno` ã§ã™ã€‚

# å®Ÿéš›ã«Denoã‚’ä½¿ã£ã¦ã¿ã‚‹ğŸ¦•
ãªã«ã¯ã¨ã‚‚ã‚ã‚Œã€å®Ÿéš›ã« `Deno` ã‚’ä½¿ã£ã¦ã¿ã¦ `Node.js` ã¨ã®é•ã„ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã¾ãšã¯[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://deno.land/#installation)ã‚’ã—ã¾ã™ã€‚ç§ã¯ Mac ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€`Homebrew` ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚

```sh
$ brew install deno
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§æ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```sh
$ deno -V
deno 1.0.0
```

## Denoã‚’å®Ÿè¡Œã™ã‚‹
`Deno` ã‚’ç°¡å˜ã«å®Ÿè¡Œã—ã¦ã¿ã‚‹ãŸã‚ã«ã€å…¬å¼ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ã¿ã¾ã™ã€‚

```sh
$ deno run https://deno.land/std/examples/welcome.ts
Download https://deno.land/std/examples/welcome.ts
Warning Implicitly using master branch https://deno.land/std/examples/welcome.ts
Compile https://deno.land/std/examples/welcome.ts
Welcome to Deno ğŸ¦•
```

æç«œã•ã‚“ãŒå‡ºã¦ãã¾ã—ãŸã€‚å¯æ„›ã„ã§ã™ã­ğŸ¦•ã€‚

2 å›ç›®ä»¥é™ã®å‹•ä½œã¯ã€åˆå›ã¨å¤‰ã‚ã£ã¦ãã¾ã™ã€‚

```sh
$ deno run https://deno.land/std/examples/welcome.ts
Welcome to Deno ğŸ¦•
```

`Download` ã‚„ `Compile` ãªã©ã®è¡ŒãŒãªããªã£ã¦ã„ã¾ã™ã­ã€‚
ä»Šå›ã®ã‚ˆã†ã«ã€ãƒªãƒ¢ãƒ¼ãƒˆã® URL ã‚’å®Ÿè¡Œã—ãŸå ´åˆã«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œ 2 å›ç›®ä»¥é™ã¯ç´ æ—©ãå®Ÿè¡Œã§ãã¾ã™ã€‚
ã“ã‚Œã¯å¾Œã»ã©å‡ºã¦ãã‚‹ `import` ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚€ã¨ãã¨åŒã˜ã§ã™ã€‚

### å¤‰æ›´ç‚¹1ã€€TypeScriptã‚’ãã®ã¾ã¾ã‚µãƒãƒ¼ãƒˆ
ã•ãã»ã©å®Ÿè¡Œã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ è‡ªä½“ã¯ã¨ã¦ã‚‚ç°¡å˜ãªã‚‚ã®ã§ã—ãŸãŒã€æ—©é€Ÿ `Node.js` ã¨ã®å¤‰æ›´ç‚¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
ã•ãã»ã©å®Ÿè¡Œã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ  `https://deno.land/std/examples/welcome.ts` ã®æ‹¡å¼µå­ã‚’è¦‹ã‚‹ã¨ã€`TypeScript` ã®ã‚³ãƒ¼ãƒ‰ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
å¾“æ¥ã§ã¯ `TypeScript` ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€`npm` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ãƒ«ãƒ¼ãƒˆé…ä¸‹ã« `tsconfig.json` ã‚’è¨­ç½®ã—ã¦ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã€‚ã¨ã„ã£ãŸä½œæ¥­ãŒå¿…è¦ã§ã—ãŸã€‚
ã—ã‹ã—ã€`Deno` ãªã‚‰ãã®ã‚ˆã†ãªè¨­å®šã¯ã™ã¹ã¦å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `TypeScript` ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§ã€ãã®ã¾ã¾å®Ÿè¡Œã§ãã¾ã™ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹
ç°¡å˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã ã‘ã§ã¯ã¤ã¾ã‚‰ãªã„ã®ã§ã€æ¬¡ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ã®ã‚³ãƒ”ãƒšã§æŒã£ã¦ãã¾ã—ãŸã€‚
8000 ãƒãƒ¼ãƒˆã§ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ã€Hello World ã¨è¡¨ç¤ºã•ã›ã¾ã™ã€‚

```js:server.js
import { serve } from "https://deno.land/std@0.50.0/http/server.ts";
const s = serve({ port: 8000 });
console.log("http://localhost:8000/");
for await (const req of s) {
  req.respond({ body: "Hello World\n" });
}
```

æ¬¡ã«ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ãŒ `Node.js` ã§æ›¸ã„ãŸåŒã˜ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

```js
const http = require('http');

const server = http.createServer((req, res) => {
  res.end('Hello World');
});

server.listen(8000)
```

ã“ã® 2 ã¤ã®ã‚³ãƒ¼ãƒ‰ã‚’æ¯”ã¹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### å¤‰æ›´ç‚¹2 npmãŒãªã„

ã¨ã€å…ˆã«ã‚³ãƒ¼ãƒ‰ã®æ–¹ã‚’æå‡ºã—ã¾ã—ãŸãŒã€ãã®å‰ã«ã‚„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã­ã€‚
ã¾ãšã¯ `npm init` ã§ `package.json` ã‚’ä½œã£ã¦ãã‚Œã‹ã‚‰ã€‚.ã€‚ãˆã£ `Deno` ã§ã¯å¿…è¦ãªã„ã£ã¦ï¼Ÿ

ãã†ãªã‚“ã§ã™ã€`Deno` ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ãˆæ¸ˆã¾ã›ã‚Œã°å…ˆã«è¦‹ãŸã‚ˆã†ã«ãã®ã¾ã¾ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚
é©šããªã‹ã‚Œã€ãã‚‚ãã‚‚ `Deno` ã«ã¯**npmãŒã‚ã‚Šã¾ã›ã‚“**ã€‚
`npm` ãŒãªã„ã¨ã„ã†ã“ã¨ã¯å½“ç„¶ `node_modules` ã‚„ `package.json` ãªã‚“ã¦ã‚‚ã®ã‚‚å­˜åœ¨ã—ã¾ã›ã‚“ã€‚

`node_modules` ã£ã¦ã‹ãªã‚Šå·¨å¤§ãªãƒ•ã‚¡ã‚¤ãƒ«ã§ã—ãŸã—ã€ã“ã„ã¤ãŒãªããªã‚‹ã ã‘ã§ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆãŒçµæ§‹ã‚¹ãƒƒã‚­ãƒªã—ã¦ãã‚‹ã‚“ã˜ã‚ƒãªã„ã§ã—ã‚‡ã†ã‹ã€‚
`node_modules` ã¨ `package.json` ã®æ¡ç”¨ã¯ã€`Node.js` ã®è¨­è¨ˆãƒŸã‚¹ã¨ã—ã¦ã‚‚ä¸Šã’ã‚‰ã‚Œã¦ã„ãŸç‚¹ã§ã™ã€‚

ã§ã¯ã€`npm` ã‚’ä½¿ç”¨ã—ãªã„ã¨ãªã‚Œã°ã€ã©ã®ã‚ˆã†ã«ã—ã¦å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
ãã®ç­”ãˆã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ã‚‚ã‚ã‚‹ã‚ˆã†ã«ã€`import` ã« URL ã‚’æ¸¡ã—ã¾ã™ã€‚

```js
import { serve } from "https://deno.land/std@0.50.0/http/server.ts";
```

ã“ã‚Œã¯ã€`Deno` ã§å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å”¯ä¸€ã®æ–¹æ³•ã§ã™ã€‚ã‚‚ã† `npm install` ã¯å¿…è¦ã¨ã—ã¾ã›ã‚“ã€‚
ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯å®Ÿè¡Œæ™‚ã«è¡Œã‚ã‚Œã€çµæœã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚

### å¤‰æ›´ç‚¹3 requireãŒãªããªã£ãŸ

é–¢é€£ã—ã¦ã€ä»Šã¾ã§ `Node.js` ã§åˆ©ç”¨ã•ã‚Œã¦ããŸ `require` ãŒå»ƒæ­¢ã•ã‚Œã¾ã—ãŸã€‚

Node.js

```js
const http = require('http');
```

Deno

```js

import { serve } from "https://deno.land/std@0.50.0/http/server.ts";
```

[CommonJS](https://ja.wikipedia.org/wiki/CommonJS)ã®ä»£ã‚ã‚Šã« `ES Module`(`import` ã¨ `export`)ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

### å¤‰æ›´ç‚¹4 ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®await

ã‚ï¼ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®ã“ã®éƒ¨åˆ†ã€é–“é•ã£ã¦ã¾ã™ã‚ˆï¼ã»ã‚‰ï¼

```js
for await (const req of s) {
  req.respond({ body: "Hello World\n" });
}
```

`await` ã¯ `async` é–¢æ•°ã®ä¸­ã§ã—ã‹å‹•ä½œã§ããªã„ã‚“ã§ã™ã‚ˆãƒ¼ã€ã»ã‚‰ `VSCode` ã ã£ã¦æ€’ã£ã¦ã‚‹ã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 20200518 1.40.50.png](https://firebasestorage.googleapis.com/v0/b/app-blog-1ef41.appspot.com/o/articles%2FF2z5J7aePghFMh2hqfVK%2Fb9f9d424a89a2b8ec279e2ee04aca1b0.png?alt=media&token=2d87f1d9-ba5c-4961-95e2-14893eb07993)

..ã€‚ãˆã€ã“ã‚ŒãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸï¼Ÿ

ãã†ã§ã™ã€ã‚‚ã† `await` ä½¿ã„ãŸã•ã«ã‚ã–ã‚ã– `async` é–¢æ•°ã§å›²ã‚€å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚„ã£ãŸã­ã€‚

ã“ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ« await ã«é–¢ã—ã¦ã¯ Deno ã§ã®ç‰¹å¾´ã§ã¯ãªãã€ECMAScript ã®ä»•æ§˜ã¨è¨€ã†ã»ã†ãŒæ­£ã—ã„ã§ã™ã­ã€‚

https://github.com/tc39/proposal-top-level-await

ï¼ˆ@YoshiTheChinchilla ã•ã‚“ã”æŒ‡æ‘˜ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ï¼‰

## å®Ÿè¡Œã—ã¦ã¿ã‚‹
ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ã®å¤‰æ›´ç‚¹ã¯ã“ã“ã¾ã§ã«ã—ã¦ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
`deno run` ã§å®Ÿè¡Œã§ãã¾ã™ã€‚

```sh
$ deno run server.js
Download https://deno.land/std@0.50.0/http/server.ts
Compile https://deno.land/std@0.50.0/http/server.ts
Download https://deno.land/std@0.50.0/encoding/utf8.ts
Download https://deno.land/std@0.50.0/io/bufio.ts
Download https://deno.land/std@0.50.0/testing/asserts.ts
Download https://deno.land/std@0.50.0/async/mod.ts
Download https://deno.land/std@0.50.0/http/_io.ts
Download https://deno.land/std@0.50.0/io/util.ts
Download https://deno.land/std@0.50.0/path/mod.ts
Download https://deno.land/std@0.50.0/path/win32.ts
Download https://deno.land/std@0.50.0/path/posix.ts
Download https://deno.land/std@0.50.0/path/common.ts
Download https://deno.land/std@0.50.0/path/separator.ts
Download https://deno.land/std@0.50.0/path/interface.ts
Download https://deno.land/std@0.50.0/path/glob.ts
Download https://deno.land/std@0.50.0/path/_constants.ts
Download https://deno.land/std@0.50.0/path/_util.ts
Download https://deno.land/std@0.50.0/fmt/colors.ts
Download https://deno.land/std@0.50.0/testing/diff.ts
Download https://deno.land/std@0.50.0/path/_globrex.ts
Download https://deno.land/std@0.50.0/async/deferred.ts
Download https://deno.land/std@0.50.0/async/delay.ts
Download https://deno.land/std@0.50.0/async/mux_async_iterator.ts
Download https://deno.land/std@0.50.0/textproto/mod.ts
Download https://deno.land/std@0.50.0/http/http_status.ts
Download https://deno.land/std@0.50.0/bytes/mod.ts
error: Uncaught PermissionDenied: network access to "0.0.0.0:8000", run again with the --allow-net flag
    at unwrapResponse ($deno$/ops/dispatch_json.ts:43:11)
    at Object.sendSync ($deno$/ops/dispatch_json.ts:72:10)
    at Object.listen ($deno$/ops/net.ts:51:10)
    at listen ($deno$/net.ts:152:22)
    at serve (https://deno.land/std@0.50.0/http/server.ts:261:20)
    at file:///Users/asaiippei/deno-test/server.js:2:11
```

å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã“ã¨ã¾ã§ã¯è‰¯ã‹ã£ãŸã®ã§ã™ãŒã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

### å¤‰æ›´ç‚¹5 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®å¤‰æ›´

ãªãœã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã®ã§ã—ã‚‡ã†ã‹ã€‚
å®Ÿã¯ã€`Deno` ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚»ã‚­ãƒ¥ã‚¢ã§ã‚ã‚Šã€æ˜ç¤ºçš„ã«æœ‰åŠ¹ã«ã—ãªã„é™ã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ç’°å¢ƒå¤‰æ•°ãªã©ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’è¨±å¯ã™ã‚‹ã«ã¯ `--allow-net` ãƒ•ãƒ©ã‚°ã‚’ä»˜ä¸ã—ã¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã‚‚ã†ä¸€åº¦ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```sh
$ deno run --allow-net  server.js
http://localhost:8000/
```

ç„¡äº‹æˆåŠŸã—ã¾ã—ãŸã­ã€‚
`http://localhost:8000/` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ï¼
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 20200518 1.56.19.png](https://firebasestorage.googleapis.com/v0/b/app-blog-1ef41.appspot.com/o/articles%2FF2z5J7aePghFMh2hqfVK%2F30318c8d890e66997ffe751265148cca.png?alt=media&token=8c70892b-43c0-4f8c-9af8-3c53f4df4a40)

### å¤‰æ›´ç‚¹5 Web APIã®å®Ÿè£…ã«ã‚ˆã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã®äº’æ›æ€§ã®å‘ä¸Š
[Web API](https://developer.mozilla.org/ja/docs/Learn/JavaScript/Client-side_web_APIs)ã¯ Web ãƒ–ãƒ©ã‚¦ã‚¶ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã§ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã‚„ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ç’°å¢ƒã®æƒ…å ±ã‚’å–å¾—ã—ã€ã“ã‚Œã‚’ä½¿ã£ã¦å½¹ã«ç«‹ã¤ã‚„ã‚„ã“ã—ã„ã“ã¨ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚
ä»£è¡¨çš„ãªã‚‚ã®ã§ã„ãˆã°ã€`DOM`,`Canvas API`,`Storage`,`fetch API` ãªã©ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã® API ã¯æ—¥å¸¸çš„ã«ä½¿ç”¨ã—ã¦ã„ã¦ã€JavaScript ã‚’è¦šãˆãŸã¦ã®é ƒã¯ JavaScript æ¨™æº–ã®ãƒ¢ãƒã ã¨æ€ã„ã“ã‚“ã§ã—ã¾ã†ã»ã©ã§ã™ãŒã€`Node.js` ã§ã¯ã“ã‚Œã‚‰ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚ç†ç”±ã¯ç°¡å˜ã§ã€ã“ã‚Œã‚‰ã® API ã¯ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆGoogle Chrome, Firefoxï¼‰ã§åˆ©ç”¨ã§ãã‚‹ã‚‚ã®ã§ã‚ã‚Šã€`Node.js` ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚

#### Node.jsã®å ´åˆ

ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã« `Node.js` ã§ `Fetch API` ã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å¤±æ•—ã—ã¾ã™ã€‚

```js
fetch('https://pokeapi.co/api/v2/pokemon/')
  .then(res => res.json())
  .then(data => console.log(data) )
```

```bash
$ node node-fetch.js
node-fetch.js:2
fetch('https://pokeapi.co/api/v2/pokemon/1')
^

ReferenceError: fetch is not defined
    at Object.<anonymous> (/Users/asaiippei/deno-test/node-fetch.js:2:1)
    at Module._compile (internal/modules/cjs/loader.js:955:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:991:10)
    at Module.load (internal/modules/cjs/loader.js:811:32)
    at Function.Module._load (internal/modules/cjs/loader.js:723:14)
    at Function.Module.runMain (internal/modules/cjs/loader.js:1043:10)
    at internal/main/run_main_module.js:17:11
```

`fetch` ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ã¨æ€’ã‚‰ã‚Œã¦ã„ã¾ã™ã­ã€‚
ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚‹ `node-fetch` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
npm i node-fetch
```

```js
// ã“ã‚Œã‚’è¿½åŠ 
const fetch = require('node-fetch')

fetch('https://pokeapi.co/api/v2/pokemon/')
  .then(res => res.json())
  .then(data => console.log(data) )
```

```bash
$ node node-fetch.js

{
  count: 964,
  next: 'https://pokeapi.co/api/v2/pokemon/?offset=20&limit=20',
  previous: null,
  results: [
    { name: 'bulbasaur', url: 'https://pokeapi.co/api/v2/pokemon/1/' },
    { name: 'ivysaur', url: 'https://pokeapi.co/api/v2/pokemon/2/' },
    { name: 'venusaur', url: 'https://pokeapi.co/api/v2/pokemon/3/' },
    { name: 'charmander', url: 'https://pokeapi.co/api/v2/pokemon/4/' },
    { name: 'charmeleon', url: 'https://pokeapi.co/api/v2/pokemon/5/' },
    { name: 'charizard', url: 'https://pokeapi.co/api/v2/pokemon/6/' },
    { name: 'squirtle', url: 'https://pokeapi.co/api/v2/pokemon/7/' },
```

#### Denoã®å ´åˆ
`Deno` ã®å ´åˆã«ã¯ã€æ¨™æº–ã§ `Fetch API` ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãªãä½¿ç”¨ã§ãã¾ã™ã€‚

```js:fetch.js
const res = await fetch('https://pokeapi.co/api/v2/pokemon/1')
const json = res.json()
const data = await json
console.log(data)
```

ãŠã£ã¨ã€å®Ÿè¡Œã™ã‚‹ã¨ãã«ã¯ `--allow-net` ãƒ•ãƒ©ã‚°ã‚’æ¸¡ã™ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ï¼

```bash
$ deno run --allow-net fetch.js

{
 count: 964,
 next: "https://pokeapi.co/api/v2/pokemon/?offset=20&limit=20",
 previous: null,
 results: [
    { name: "bulbasaur", url: "https://pokeapi.co/api/v2/pokemon/1/" },
    { name: "ivysaur", url: "https://pokeapi.co/api/v2/pokemon/2/" },
    { name: "venusaur", url: "https://pokeapi.co/api/v2/pokemon/3/" },
    { name: "charmander", url: "https://pokeapi.co/api/v2/pokemon/4/" },
    { name: "charmeleon", url: "https://pokeapi.co/api/v2/pokemon/5/" },
    { name: "charizard", url: "https://pokeapi.co/api/v2/pokemon/6/" },
    { name: "squirtle", url: "https://pokeapi.co/api/v2/pokemon/7/" },
```

`fetch API` ã®ä»–ã«ã‚‚å¹…åºƒã„ Web API ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã®äº’æ›æ€§ã‚’å‘ä¸Šã•ã›ã¾ã—ãŸã€‚

### Denoã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ
`Deno` ã«ã¯ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

`Deno.test` ã‚’å‘¼ã¶ã“ã¨ã§ãƒ†ã‚¹ãƒˆã‚’ã§ãã¾ã™ã€‚

```js:test.js
Deno.test("hello world", () => {
  const x = 1 + 2;
  if (x !== 3) {
    throw Error("x should be equal to 3");
  }
});
```

 [æ¨™æº–ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](https://deno.land/std/testing)ã‹ã‚‰ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

```js:test.js
import { assertEquals } from "https://deno.land/std/testing/asserts.ts";

Deno.test("hello world", () => {
  const x = 2 + 2;
  assertEquals(x, 3);
});
```

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã¯ã€`Deno test` ã§ã™ã€‚

```bash
$ deno test test.js
Download https://deno.land/std/testing/asserts.ts
Warning Implicitly using master branch https://deno.land/std/testing/asserts.ts
Compile https://deno.land/std/testing/asserts.ts
Download https://deno.land/std/fmt/colors.ts
Download https://deno.land/std/testing/diff.ts
Warning Implicitly using master branch https://deno.land/std/testing/diff.ts
Warning Implicitly using master branch https://deno.land/std/fmt/colors.ts
Compile file:///Users/deno-test/.deno.test.ts

running 1 tests
test hello world ... FAILED (5ms)

failures:

hello world
AssertionError: Values are not equal:

    [Diff] Actual / Expected

-   4
+   3

    at assertEquals (https://deno.land/std/testing/asserts.ts:167:9)
    at test.js:5:3
    at asyncOpSanitizer ($deno$/testing.ts:36:11)
    at Object.resourceSanitizer [as fn] ($deno$/testing.ts:70:11)
    at TestApi.[Symbol.asyncIterator] ($deno$/testing.ts:264:22)
    at TestApi.next (<anonymous>)
    at Object.runTests ($deno$/testing.ts:346:20)

failures:

        hello world

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out (5ms)
```

åˆå›ãªã®ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå…¥ã‚Šã¾ã™ã­ã€‚
ãƒ†ã‚¹ãƒˆã‚‚å¤±æ•—ã—ã¦ã„ã‚‹ã®ã§ä¿®æ­£ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```js:test.js
import { assertEquals } from "https://deno.land/std/testing/asserts.ts";

Deno.test("hello world", () => {
  const x = 1 + 2;
  assertEquals(x, 3);
});
```

2 å›ç›®ä»¥é™ã®ãƒ†ã‚¹ãƒˆã¯ã™ãã«å®Ÿè¡Œã§ãã¾ã™ã€‚

```js
$ deno test test.js
running 1 tests
test hello world ... ok (6ms)

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out (8ms)
```

ã“ã‚Œã§ OK ã§ã™ã­ã€‚

# ãŠã‚ã‚Šã«
æ–°ã—ã„ JavaScript ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã‚ã‚‹ `Deno` ã«ã¤ã„ã¦ã–ã£ãã‚Šã¨è§¦ã‚Œã¦ã¿ã¾ã—ãŸã€‚
ã„ã¤ã®æ—¥ã‹ã€`Node.js` ã«å–ã£ã¦ä»£ã‚ã‚‹æ—¥ãŒæ¥ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€ã¨ã¦ã‚‚æ°—ã«ãªã‚Šã¾ã™ã­ã€‚
